{"version":3,"file":"static/js/src_Components_jsx.a046245a.chunk.js","mappings":"84BAKA,MAAMA,UAAgCC,EAAA,CAAU,CAC5C,YAAYC,EAAO,CACf,MAAMA,CAAK,EACX,KAAK,YAAc,KAAK,MAAM,MAC9B,KAAK,cAAgB,EACzB,CAEA,oBAAqB,CACb,KAAK,MAAM,OAAS,CAAC,KAAK,gBAC1B,KAAK,cAAgB,GACrB,KAAK,MAAM,OAAO,OAAO,GAAG,KAAK,MAAM,WAAW,IAAI,KAAK,MAAM,QAAQ,GAAI,oBAAqB,IAAI,EACjG,KAAKC,GAAU,CACRA,GAAA,MAAAA,EAAQ,WAAaA,EAAO,SAAWA,EAAO,WAC1CA,EAAO,YAAc,QAAUA,EAAO,UAAY,QAClD,KAAK,YAAY,OAAK,EAAE,4EAA6EA,EAAO,QAAQ,EAAG,OAAK,EAAE,uBAAuB,CAAC,EAC/IA,EAAO,YAAc,SAAWA,EAAO,UAAY,SAC1D,KAAK,YAAY,OAAK,EAAE;AAAA;AAAA,2BAA2HA,EAAO,QAAQ,EAAG,OAAK,EAAE,uBAAuB,EAAG,SAAS,EAG3N,CAAC,EACL,KAAK,MAAM,OAAO,OAAO,GAAG,KAAK,MAAM,WAAW,IAAI,KAAK,MAAM,QAAQ,GAAI,gBAAiB,IAAI,EAC7F,KAAWA,GAAU,wBAClB,MAAMC,EAAO,KAAK,KAAK,MAAM,IAAI,EACjC,IAAIC,EAAU,IACVF,GAAA,YAAAA,EAAQ,YAAa,UAAYA,EAAO,WAAa,IACjDC,EAAK,YAAc,UAAYA,EAAK,eACpCA,EAAK,UAAY,SACjBC,EAAU,KAIdF,GAAA,YAAAA,EAAQ,YAAa,UACrBE,EAAU,GACVD,EAAK,eAAiB,MACfD,GAAA,YAAAA,EAAQ,YAAa,QAC5BE,EAAU,GACVD,EAAK,eAAiB,MAE1B,MAAME,EAAU,CAAC,MAAO,QAAS,SAAU,QAAS,WAAY,SAAS,EACzE,QAAS,EAAI,EAAG,EAAIA,EAAQ,OAAQ,IAChC,GAAI,CAAC,KAAK,eAAeA,EAAQ,CAAC,CAAC,EAAG,CAClC,MAAMC,EAAU,MAAM,KAAK,YAAYD,EAAQ,CAAC,EAAGF,CAAI,EAClD,MAAMI,GAAK,KAAK,UAAUA,CAAC,CAAC,EACjCH,EAAUA,GAAWE,EAAQ,OACjC,CAGJF,GAAW,KAAK,MAAM,SAASD,CAAI,CACvC,CAAC,GAEb,CAEM,mBAAoB,gCACtB,mBAAM,0BAAN,IAAwB,EACxB,KAAK,UAAU,CACnB,CAAC,CAAD,CAEA,YAAa,CACT,OAAI,KAAK,cAAgB,KAAK,MAAM,QAChC,KAAK,YAAc,KAAK,MAAM,MAC1B,KAAK,aACL,KAAK,mBAAmB,GAIzB,KAAK,cAAc,CAC9B,CACJ,CAEAJ,EAAwB,UAAY,CAChC,OAAQ,WAAiB,WACzB,UAAW,WACX,UAAW,WACX,MAAO,WACP,UAAW,WACX,KAAM,WAAiB,WACvB,KAAM,WACN,OAAQ,WACR,QAAS,SACT,SAAU,QACd,EAEA,QAAeA,EC9Ef,EAAe,CACX,aAAY,IACZ,UAAS,IACT,aAAY,IACZ,YAAW,IACX,qBAAoB,IACpB,SAAQ,IACR,cAAa,IACb,wBAAuB,CAC3B,C","sources":["CheckAllConfigInvisible.jsx","Components.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport BaseField from './BaseField';\n\nclass CheckAllConfigInvisible extends BaseField {\n    constructor(props) {\n        super(props);\n        this.storedAlive = this.props.alive;\n        this.storedChecked = false;\n    }\n\n    checkConfiguration() {\n        if (this.props.alive && !this.storedChecked) {\n            this.storedChecked = true;\n            this.props.socket.sendTo(`${this.props.adapterName}.${this.props.instance}`, 'getFileSystemInfo', null)\n                .then(result => {\n                    if (result?.diskState && result.storage && result.diskFree) {\n                        if (result.diskState === 'warn' && result.storage === 'local') {\n                            this.showMessage(I18n.t('On the host only %s MB free space is available! Please check your system!', result.diskFree), I18n.t('BackItUp Information!'));\n                        } else if (result.diskState === 'error' && result.storage === 'local') {\n                            this.showMessage(I18n.t('On the host only %s MB free space is available! Local backups are currently not possible. \\n\\nPlease check your system!', result.diskFree), I18n.t('BackItUp Information!'), 'warning');\n                        }\n                    }\n                });\n            this.props.socket.sendTo(`${this.props.adapterName}.${this.props.instance}`, 'getSystemInfo', null)\n                .then(async result => {\n                    const data = { ...this.props.data };\n                    let changed = false;\n                    if (result?.systemOS === 'docker' && result.dockerDB === false) {\n                        if (data.redisType !== 'remote' && data.redisEnabled) {\n                            data.redisType = 'remote';\n                            changed = true;\n                        }\n                    }\n\n                    if (result?.systemOS === 'docker') {\n                        changed = true;\n                        data._restoreIfWait = 10000;\n                    } else if (result?.systemOS === 'win') {\n                        changed = true;\n                        data._restoreIfWait = 18000;\n                    }\n                    const CONFIGS = ['ccu', 'mySql', 'sqlite', 'pgSql', 'influxDB', 'history'];\n                    for (let c = 0; c < CONFIGS.length; c++) {\n                        if (!this.isConfigFilled(CONFIGS[c])) {\n                            const _result = await this.fetchConfig(CONFIGS[c], data)\n                                .catch(e => this.showError(e));\n                            changed = changed || _result.changed;\n                        }\n                    }\n\n                    changed && this.props.onChange(data);\n                });\n        }\n    }\n\n    async componentDidMount() {\n        super.componentDidMount();\n        this.checkDisk();\n    }\n\n    renderItem() {\n        if (this.storedAlive !== this.props.alive) {\n            this.storedAlive = this.props.alive;\n            if (this.storedAlive) {\n                this.checkConfiguration();\n            }\n        }\n\n        return this.renderMessage();\n    }\n}\n\nCheckAllConfigInvisible.propTypes = {\n    socket: PropTypes.object.isRequired,\n    themeType: PropTypes.string,\n    themeName: PropTypes.string,\n    style: PropTypes.object,\n    className: PropTypes.string,\n    data: PropTypes.object.isRequired,\n    attr: PropTypes.string,\n    schema: PropTypes.object,\n    onError: PropTypes.func,\n    onChange: PropTypes.func,\n};\n\nexport default CheckAllConfigInvisible;\n","import AdapterExist from './AdapterExist';\nimport BackupNow from './BackupNow';\nimport DetectConfig from './DetectConfig';\nimport CheckConfigInvisible from './CheckConfigInvisible';\nimport GoogleDrive from './GoogleDrive';\nimport Instance from './Instance';\nimport RestoreBackup from './RestoreBackup';\nimport CheckAllConfigInvisible from './CheckAllConfigInvisible';\n\nexport default {\n    AdapterExist,\n    BackupNow,\n    DetectConfig,\n    GoogleDrive,\n    CheckConfigInvisible,\n    Instance,\n    RestoreBackup,\n    CheckAllConfigInvisible,\n};\n"],"names":["CheckAllConfigInvisible","BaseField","props","result","data","changed","CONFIGS","_result","e"],"sourceRoot":""}