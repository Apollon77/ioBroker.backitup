"use strict";(self.webpackChunkiobroker_admin_component_backitup=self.webpackChunkiobroker_admin_component_backitup||[]).push([["src_Components_jsx"],{51512:(Y,v,o)=>{o.r(v),o.d(v,{default:()=>X});var P=o(1810),T=o(98360),j=o(86207),A=o(37451),E=o(35665),S=o(32149),B=o(50652),w=o(95973),s=o.n(w),a=o(37449),g=o(85903),D=Object.defineProperty,y=Object.getOwnPropertySymbols,M=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,F=Reflect.get,I=(n,e,t)=>e in n?D(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,R=(n,e)=>{for(var t in e||(e={}))x.call(e,t)&&I(n,t,e[t]);if(y)for(var t of y(e))N.call(e,t)&&I(n,t,e[t]);return n},G=(n,e,t)=>F(M(n),t,e),C=(n,e,t)=>new Promise((i,l)=>{var d=r=>{try{c(t.next(r))}catch(f){l(f)}},p=r=>{try{c(t.throw(r))}catch(f){l(f)}},c=r=>r.done?i(r.value):Promise.resolve(r.value).then(d,p);c((t=t.apply(n,e)).next())});class u extends g.A{constructor(e){super(e),this.storedAlive=this.props.alive,this.storedChecked=!1}checkConfiguration(){this.props.alive&&!this.storedChecked&&(this.storedChecked=!0,this.props.socket.sendTo(null,"getFileSystemInfo",null).then(e=>{e!=null&&e.diskState&&e.storage&&e.diskFree&&(e.diskState==="warn"&&e.storage==="local"?this.showMessage(a.I18n.t("On the host only %s MB free space is available! Please check your system!",e.diskFree),a.I18n.t("BackItUp Information!")):e.diskState==="error"&&e.storage==="local"&&this.showMessage(a.I18n.t(`On the host only %s MB free space is available! Local backups are currently not possible. 

Please check your system!`,e.diskFree),a.I18n.t("BackItUp Information!"),"warning"))}),this.props.socket.sendTo(null,"getSystemInfo",null).then(e=>C(this,null,function*(){const t=R({},this.props.data);let i=!1;(e==null?void 0:e.systemOS)==="docker"&&e.dockerDB===!1&&t.redisType!=="remote"&&t.redisEnabled&&(t.redisType="remote",i=!0),(e==null?void 0:e.systemOS)==="docker"?(i=!0,t._restoreIfWait=1e4):(e==null?void 0:e.systemOS)==="win"&&(i=!0,t._restoreIfWait=18e3);const l=["ccu","mySql","sqlite","pgSql","influxDB","history"];for(let d=0;d<l.length;d++)if(!this.isConfigFilled(l[d])){const p=yield this.fetchConfig(l[d],t).catch(c=>this.showError(c));i=i||p.changed}i&&this.props.onChange(t)})))}componentDidMount(){return C(this,null,function*(){G(u.prototype,this,"componentDidMount").call(this),this.checkDisk()})}renderItem(){return this.storedAlive!==this.props.alive&&(this.storedAlive=this.props.alive,this.storedAlive&&this.checkConfiguration()),this.renderMessage()}}u.propTypes={socket:s().object.isRequired,themeType:s().string,themeName:s().string,style:s().object,className:s().string,data:s().object.isRequired,attr:s().string,schema:s().object,onError:s().func,onChange:s().func};const U=u;var W=o(28437),h=o.n(W),m=o(67085),V=o(21839),z=Object.defineProperty,b=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,k=(n,e,t)=>e in n?z(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,J=(n,e)=>{for(var t in e||(e={}))H.call(e,t)&&k(n,t,e[t]);if(b)for(var t of b(e))L.call(e,t)&&k(n,t,e[t]);return n},K=(n,e,t)=>new Promise((i,l)=>{var d=r=>{try{c(t.next(r))}catch(f){l(f)}},p=r=>{try{c(t.throw(r))}catch(f){l(f)}},c=r=>r.done?i(r.value):Promise.resolve(r.value).then(d,p);c((t=t.apply(n,e)).next())});class O extends g.A{componentDidMount(){super.componentDidMount()}renderItem(){return h().createElement(h().Fragment,null,h().createElement(m.Table,{size:"dence"},'variant="contained" endIcon=',h().createElement(V.Search,null),"onClick=",()=>K(this,null,function*(){const e=J({},this.props.data),t=yield this.fetchConfig(this.props.schema.adapter,!1,e);t.found?t.changed?(this.showMessage(a.I18n.t("BackItUp Information!"),t.message||a.I18n.t("Config taken from %s",t.found.substring(15))),this.props.onChange(e)):this.showMessage(a.I18n.t("BackItUp Information!"),t.message||a.I18n.t("Config found in %s, but nothing changed",t.found.substring(15))):this.showMessage(a.I18n.t("BackItUp Warning!"),a.I18n.t("No config found"),"warning")}),">",h().createElement(m.TableHead,null,h().createElement(m.TableRow,null,h().createElement(m.TableCell,null,a.I18n.t("Detect config")))),a.I18n.t("Detect config")),this.renderMessage())}}O.propTypes={socket:s().object.isRequired,themeType:s().string,themeName:s().string,style:s().object,className:s().string,data:s().object.isRequired,attr:s().string,schema:s().object,onError:s().func,onChange:s().func};const Q=O,X={AdapterExist:P.A,BackupNow:T.A,DetectConfig:j.A,GoogleDrive:E.A,CheckConfigInvisible:A.A,Instance:S.A,RestoreBackup:B.A,CheckAllConfigInvisible:U,Table:Q}}}]);

//# sourceMappingURL=src_Components_jsx.ef64ac6a.chunk.js.map