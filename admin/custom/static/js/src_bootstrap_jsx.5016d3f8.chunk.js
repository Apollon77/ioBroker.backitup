"use strict";(self.webpackChunkiobroker_admin_component_backitup=self.webpackChunkiobroker_admin_component_backitup||[]).push([["src_bootstrap_jsx"],{49678:(m,z,c)=>{c.r(z);var V=c(28437),n=c.n(V),J=c(94140),E=c(88700),P=c(40805),X=c(96808),K=c.n(X),Q=c(2212),Y=c(65262),Z=c.n(Y),D=c(42854),q=c(59434),_=c.n(q),ee=c(95973),o=c.n(ee),f=c(70143),h=c(37449),g=c(67085),te=c(28437),se=Object.defineProperty,oe=Object.defineProperties,ne=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,b=(s,e,t)=>e in s?se(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,v=(s,e)=>{for(var t in e||(e={}))re.call(e,t)&&b(s,t,e[t]);if(k)for(var t of k(e))ae.call(e,t)&&b(s,t,e[t]);return s},y=(s,e)=>oe(s,ne(e)),O=(s,e,t)=>(b(s,typeof e!="symbol"?e+"":e,t),t),w=(s,e,t)=>new Promise((a,l)=>{var i=r=>{try{p(t.next(r))}catch(d){l(d)}},u=r=>{try{p(t.throw(r))}catch(d){l(d)}},p=r=>r.done?a(r.value):Promise.resolve(r.value).then(i,u);p((t=t.apply(s,e)).next())});class ie extends h.ConfigGeneric{constructor(e){super(e),O(this,"fetchCcuConfig",()=>w(this,null,function*(){const t=Object.values(yield this.props.socket.getObjectViewCustom("system","instance","system.adapter.hm-rpc.","system.adapter.hm-rpc.\u9999"));let a=!1;if(t&&t.length){for(let l=0;l<t.length;l++)if(t[l].common.enabled){const u=t[l].native;this.props.onChange(y(v({},this.props.data),{ccuHost:u.homematicAddress,ccuUsehttps:u.useHttps})),this.props.onChange(y(v({},this.props.data),{ccuHost:u.homematicAddress,ccuUsehttps:u.useHttps})),a=t[l]._id;break}if(!a)for(let l=0;l<t.length;l++){const i=t[l].native;this.props.onChange(y(v({},this.props.data),{ccuHost:i.homematicAddress,ccuUsehttps:i.useHttps})),this.props.onChange(y(v({},this.props.data),{ccuHost:i.homematicAddress,ccuUsehttps:i.useHttps})),a=t[l]._id}}a?(a=a.substring(15),this.showMessage(h.I18n.t("Backitup Information!"),h.I18n.t("Config taken from %s",a))):this.showMessage(h.I18n.t("Backitup Warning!"),h.I18n.t("No config found"))})),O(this,"checkAdapterInstall",t=>w(this,null,function*(){const a=this.props.common.host,l=!1;let i=t;if((t==="pgsql"||t==="mysql"||t==="sqlite")&&(i="sql"),!l){const u=Object.values(yield this.props.socket.getObjectViewCustom("system","instance",`system.adapter.${i}.`,`system.adapter.${i}.\u9999`));if(u&&u.length){for(let p=0;p<u.length;p++)if(u[p].common.host!==a&&(i==="zigbee"||i==="esphome"||i==="zigbee2mqtt"||i==="node-red"||i==="yahka"||i==="jarvis"||i==="history")){this.showMessage(h.I18n.t("Backitup Warning!"),h.I18n.t("No %s Instance found on this host. Please check your System",i));break}}else u.length===0&&(i==="zigbee"||i==="esphome"||i==="zigbee2mqtt"||i==="node-red"||i==="yahka"||i==="jarvis"||i==="history")&&this.showMessage(h.I18n.t("Backitup Warning!"),h.I18n.t("No %s Instance found on this host. Please check your System",i))}})),O(this,"showMessage",(t,a)=>{this.setState({message:{title:t,text:a}})}),this.state.message=!1}renderMessage(){return this.state.message&&te.createElement(h.Message,{title:this.state.message.title,text:this.state.message.text,onClose:()=>this.setState({message:!1})})}}const x=ie;var ce=(s,e,t)=>new Promise((a,l)=>{var i=r=>{try{p(t.next(r))}catch(d){l(d)}},u=r=>{try{p(t.throw(r))}catch(d){l(d)}},p=r=>r.done?a(r.value):Promise.resolve(r.value).then(i,u);p((t=t.apply(s,e)).next())});const le=()=>({});class S extends x{constructor(e){super(e),this.state.message=!1}renderItem(){return n().createElement(n().Fragment,null,n().createElement(g.FormControlLabel,{control:n().createElement(g.Checkbox,{onChange:()=>ce(this,null,function*(){this.checkAdapterInstall("influxdb")})}),label:h.i18n.t("Adapter exist")}),this.renderMessage())}}S.propTypes={socket:o().object.isRequired,themeType:o().string,themeName:o().string,style:o().object,className:o().string,data:o().object.isRequired,attr:o().string,schema:o().object,onError:o().func,onChange:o().func};const pe=(0,f.withStyles)(le)(S);var N=c(21839),me=Object.defineProperty,he=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,j=(s,e,t)=>e in s?me(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,fe=(s,e)=>{for(var t in e||(e={}))de.call(e,t)&&j(s,t,e[t]);if(T)for(var t of T(e))ge.call(e,t)&&j(s,t,e[t]);return s},ve=(s,e)=>he(s,ue(e)),ye=(s,e,t)=>(j(s,typeof e!="symbol"?e+"":e,t),t),Ce=(s,e,t)=>new Promise((a,l)=>{var i=r=>{try{p(t.next(r))}catch(d){l(d)}},u=r=>{try{p(t.throw(r))}catch(d){l(d)}},p=r=>r.done?a(r.value):Promise.resolve(r.value).then(i,u);p((t=t.apply(s,e)).next())});const Ee=()=>({});class A extends h.ConfigGeneric{constructor(e){super(e),ye(this,"onOutput",(t,a)=>{a&&a.val&&a.val!==this.state.lastExecutionLine&&(this.setState({executionLog:`${this.state.executionLog+a.val}
`,lastExecutionLine:a.val}),a.val==="[EXIT] 0"&&(this.setState({executing:!1}),this.state.closeOnReady&&this.setState({executionDialog:!1})))}),this.state=ve(fe({},this.state),{executing:!1,executionDialog:!1,executionLog:"",lastExecutionLine:"",closeOnReady:!1})}componentDidMount(){super.componentDidMount(),this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.output.line`,this.onOutput)}componentWillUnmount(){super.componentWillUnmount(),this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.output.line`,this.onOutput)}renderExecutionDialog(){return n().createElement(g.Dialog,{open:this.state.executionDialog,onClose:()=>this.setState({executionDialog:!1}),maxWidth:"md",fullWidth:!0},n().createElement(g.DialogTitle,null,h.i18n.t("Backitup execution:")),n().createElement(g.DialogContent,null,n().createElement(g.TextField,{multiline:!0,fullWidth:!0,inputProps:{style:{height:400}},value:this.state.executionLog})),n().createElement(g.DialogActions,null,n().createElement(g.FormControlLabel,{control:n().createElement(g.Checkbox,{checked:this.state.closeOnReady,onChange:e=>this.setState({closeOnReady:e.target.checked})}),label:h.i18n.t("Close on ready")}),n().createElement(g.Button,{variant:"contained",onClick:()=>this.setState({executionDialog:!1})},h.i18n.t("Close"))))}renderItem(){return n().createElement(n().Fragment,null,n().createElement(g.Button,{onClick:()=>Ce(this,null,function*(){this.setState({executionDialog:!0,executionLog:"",executing:!0}),yield this.props.socket.setState(`${this.props.adapterName}.${this.props.instance}.oneClick.ccu`,!0)}),variant:"contained",endIcon:n().createElement(N.CloudUpload,null)},h.i18n.t("Backup now")),this.renderExecutionDialog())}}A.propTypes={socket:o().object.isRequired,themeType:o().string,themeName:o().string,style:o().object,className:o().string,data:o().object.isRequired,attr:o().string,schema:o().object,onError:o().func,onChange:o().func};const Pe=(0,f.withStyles)(Ee)(A);var be=(s,e,t)=>new Promise((a,l)=>{var i=r=>{try{p(t.next(r))}catch(d){l(d)}},u=r=>{try{p(t.throw(r))}catch(d){l(d)}},p=r=>r.done?a(r.value):Promise.resolve(r.value).then(i,u);p((t=t.apply(s,e)).next())});const Oe=()=>({});class I extends x{renderItem(){return n().createElement(n().Fragment,null,n().createElement(g.Button,{variant:"contained",endIcon:n().createElement(N.Search,null),onClick:()=>be(this,null,function*(){this.fetchCcuConfig()})},h.i18n.t("Detect config")),this.renderMessage())}}I.propTypes={socket:o().object.isRequired,themeType:o().string,themeName:o().string,style:o().object,className:o().string,data:o().object.isRequired,attr:o().string,schema:o().object,onError:o().func,onChange:o().func};const xe=(0,f.withStyles)(Oe)(I);var Ne=Object.defineProperty,je=Object.defineProperties,De=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertySymbols,ke=Object.getPrototypeOf,we=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,Te=Reflect.get,G=(s,e,t)=>e in s?Ne(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Ae=(s,e)=>{for(var t in e||(e={}))we.call(e,t)&&G(s,t,e[t]);if(B)for(var t of B(e))Se.call(e,t)&&G(s,t,e[t]);return s},Ie=(s,e)=>je(s,De(e)),Be=(s,e,t)=>Te(ke(s),t,e),R=(s,e,t)=>new Promise((a,l)=>{var i=r=>{try{p(t.next(r))}catch(d){l(d)}},u=r=>{try{p(t.throw(r))}catch(d){l(d)}},p=r=>r.done?a(r.value):Promise.resolve(r.value).then(i,u);p((t=t.apply(s,e)).next())});const Ge=()=>({});class C extends h.ConfigGeneric{constructor(e){super(e),this.state.googleDriveUrl=""}componentDidMount(){return R(this,null,function*(){Be(C.prototype,this,"componentDidMount").call(this);const e=yield this.props.socket.getObject(`system.adapter.${this.props.adapterName}.${this.props.instance}`);e&&e.native&&this.setState({native:e.native})})}renderItem(){return this.state.native?n().createElement("div",null,n().createElement("div",null,n().createElement(g.Button,{endIcon:n().createElement(N.CloudUpload,null),variant:"contained",onClick:()=>R(this,null,function*(){const e=yield this.props.socket.sendTo(`${this.props.adapterName}.${this.props.instance}`,"authGoogleDrive");this.setState({googleDriveUrl:e.url})})},h.i18n.t(this.state.native.googledriveAccessTokens?"Renew google drive access":"Get google drive access"))),this.state.googleDriveUrl?n().createElement(n().Fragment,null,n().createElement("div",null,`${h.i18n.t("Authorize this app by visiting this url")}: `,n().createElement("a",{target:"_blank",href:this.state.googleDriveUrl,rel:"noreferrer"},this.state.googleDriveUrl)),n().createElement("div",null,n().createElement(g.TextField,{label:h.i18n.t("Enter the code from that page here"),variant:"standard",value:this.props.data.googledriveAccessTokens||"",onChange:e=>this.props.onChange(Ie(Ae({},this.props.data),{googledriveAccessTokens:e.target.value})),fullWidth:!0}))):null):null}}C.propTypes={socket:o().object.isRequired,themeType:o().string,themeName:o().string,style:o().object,className:o().string,data:o().object.isRequired,attr:o().string,schema:o().object,onError:o().func,onChange:o().func};const Re=(0,f.withStyles)(Ge)(C),Me=()=>({});class M extends x{componentDidMount(){super.componentDidMount(),this.fetchCcuConfig()}renderItem(){return this.renderMessage()}}M.propTypes={socket:o().object.isRequired,themeType:o().string,themeName:o().string,style:o().object,className:o().string,data:o().object.isRequired,attr:o().string,schema:o().object,onError:o().func,onChange:o().func};const Fe=(0,f.withStyles)(Me)(M);var Le=Object.defineProperty,F=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,L=(s,e,t)=>e in s?Le(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,We=(s,e)=>{for(var t in e||(e={}))Ue.call(e,t)&&L(s,t,e[t]);if(F)for(var t of F(e))$e.call(e,t)&&L(s,t,e[t]);return s};const He=s=>({app:{backgroundColor:s.palette.background.default,color:s.palette.text.primary,height:"100%"},item:{padding:50,width:400}});class ze extends Z(){constructor(e){const t=We({},e);super(e,t),this.state={data:{myCustomAttribute:"red"},theme:this.createTheme()};const a={en:c(75553),de:c(46477),ru:c(63715),pt:c(74606),nl:c(86164),fr:c(74554),it:c(66851),es:c(72706),pl:c(23638),uk:c(93882),"zh-cn":c(80222)};D.default.setTranslations(a),D.default.setLanguage((navigator.language||navigator.userLanguage||"en").substring(0,2).toLowerCase())}render(){return this.state.loaded?n().createElement(E.A,{injectFirst:!0},n().createElement(P.A,{theme:this.state.theme},n().createElement("div",{className:this.props.classes.app},n().createElement("div",{className:this.props.classes.item},n().createElement(pe,{socket:this.socket,themeType:this.state.themeType,themeName:this.state.themeName,attr:"myCustomAttribute",data:this.state.data,onError:()=>{},instance:0,schema:{name:"ConfigCustomTelegramSet/Components/TelegramComponent",type:"custom"},onChange:e=>{this.setState({data:e})},adapterName:"backitup",common:this.common}),n().createElement(Pe,{socket:this.socket,themeType:this.state.themeType,themeName:this.state.themeName,attr:"myCustomAttribute",data:this.state.data,onError:()=>{},instance:0,schema:{name:"ConfigCustomTelegramSet/Components/TelegramComponent",type:"custom"},onChange:e=>{this.setState({data:e})},adapterName:"backitup",common:this.common}),n().createElement(xe,{socket:this.socket,themeType:this.state.themeType,themeName:this.state.themeName,attr:"myCustomAttribute",data:this.state.data,onError:()=>{},instance:0,schema:{name:"ConfigCustomTelegramSet/Components/TelegramComponent",type:"custom"},onChange:e=>{this.setState({data:e})},adapterName:"backitup",common:this.common}),n().createElement(Fe,{socket:this.socket,themeType:this.state.themeType,themeName:this.state.themeName,attr:"myCustomAttribute",data:this.state.data,onError:()=>{},instance:0,schema:{name:"ConfigCustomTelegramSet/Components/TelegramComponent",type:"custom"},onChange:e=>{this.setState({data:e})},adapterName:"backitup",common:this.common}),n().createElement(Re,{socket:this.socket,themeType:this.state.themeType,themeName:this.state.themeName,attr:"myCustomAttribute",data:this.state.data,onError:()=>{},instance:0,schema:{name:"ConfigCustomTelegramSet/Components/TelegramComponent",type:"custom"},onChange:e=>{this.setState({data:e})},adapterName:"backitup",common:this.common}))))):n().createElement(E.A,{injectFirst:!0},n().createElement(P.A,{theme:this.state.theme},n().createElement(_(),{theme:this.state.themeType})))}}const Ve=(0,Q.A)(He)(ze);var Je=c(86465),Xe=Object.defineProperty,U=Object.getOwnPropertySymbols,Ke=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable,$=(s,e,t)=>e in s?Xe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Ye=(s,e)=>{for(var t in e||(e={}))Ke.call(e,t)&&$(s,t,e[t]);if(U)for(var t of U(e))Qe.call(e,t)&&$(s,t,e[t]);return s};const Ze=s=>{const e="#dd5325",t="#73b6a8",a=Ye({},(0,Je.default)(s));return a&&(a.palette.text.danger={color:e},a.palette.text.success={color:t},a)};window.adapterName="adapter-component-template";let W=K().getThemeName();function H(){const s=document.getElementById("root");return(0,J.H)(s).render(n().createElement(n().StrictMode,null,n().createElement(E.A,{injectFirst:!0},n().createElement(P.A,{theme:Ze(W)},n().createElement(Ve,{socket:{port:8081},onThemeChange:t=>{W=t,H()},adapterName:"backitup"})))))}H()},46477:m=>{m.exports={}},75553:m=>{m.exports=JSON.parse('{"Adapter exist":"Adapter exist","Backitup execution:":"Backitup execution:","Close on ready":"Close on ready","Close":"Close","Backup now":"Backup now","Backitup Information!":"Backitup Information!","Config taken from %s":"Config taken from %s","Backitup Warning!":"Backitup Warning!","No config found":"No config found","No %s Instance found on this host. Please check your System":"No %s Instance found on this host. Please check your System","Detect config":"Detect config","Authorize this app by visiting":"Authorize this app by visiting","Enter the code from that page here":"Enter the code from that page here","Renew google drive access":"Renew google drive access","Get google drive access":"Get google drive access","ra_Close":"Close"}')},72706:m=>{m.exports={}},74554:m=>{m.exports={}},66851:m=>{m.exports={}},86164:m=>{m.exports={}},23638:m=>{m.exports={}},74606:m=>{m.exports={}},63715:m=>{m.exports={}},93882:m=>{m.exports={}},80222:m=>{m.exports={}}}]);

//# sourceMappingURL=src_bootstrap_jsx.5016d3f8.chunk.js.map