"use strict";(self.webpackChunkiobroker_admin_component_backitup=self.webpackChunkiobroker_admin_component_backitup||[]).push([["src_AdapterExist_jsx-src_BackupNow_jsx-src_CheckConfigInvisible_jsx-src_DetectConfig_jsx-src_-dbf87e"],{1810:(Y,K,a)=>{a.d(K,{A:()=>o});var B=a(28437),l=a.n(B),W=a(95973),d=a.n(W),b=a(37449),C=a.n(b),P=a(67085),D=a.n(P),O=a(85903),L=Object.defineProperty,k=Object.defineProperties,H=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,e=(t,n,c)=>n in t?L(t,n,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[n]=c,s=(t,n)=>{for(var c in n||(n={}))w.call(n,c)&&e(t,c,n[c]);if(U)for(var c of U(n))f.call(n,c)&&e(t,c,n[c]);return t},i=(t,n)=>k(t,H(n)),u=(t,n,c)=>new Promise((g,E)=>{var y=p=>{try{I(c.next(p))}catch(h){E(h)}},S=p=>{try{I(c.throw(p))}catch(h){E(h)}},I=p=>p.done?g(p.value):Promise.resolve(p.value).then(y,S);I((c=c.apply(t,n)).next())});class r extends O.A{renderItem(){return l().createElement(l().Fragment,null,l().createElement(P.FormControlLabel,{control:l().createElement(P.Checkbox,{checked:this.props.data[this.props.attr]||!1,onChange:n=>u(this,null,function*(){if(n.target.checked){if(this.props.schema.adapter)this.checkAdapterInstall(this.props.schema.adapter,this.props.schema.allHosts).catch(c=>console.error(c));else if(this.props.schema.alert){const g=b.I18n.t(this.props.schema.alert).split(`
`).map(E=>l().createElement("div",{key:E,style:{minHeight:24}},E));this.setState({message:{text:g,title:b.I18n.t(this.props.schema.title)}})}}this.props.onChange(i(s({},this.props.data),{[this.props.attr]:n.target.checked}))})}),label:b.I18n.t(this.props.schema.label||this.props.schema.adapter)}),this.renderMessage())}}r.propTypes={socket:d().object.isRequired,themeType:d().string,themeName:d().string,style:d().object,className:d().string,data:d().object.isRequired,attr:d().string,schema:d().object,onError:d().func,onChange:d().func};const o=r},98360:(Y,K,a)=>{a.d(K,{A:()=>I});var B=a(28437),l=a.n(B),W=a(95973),d=a.n(W),b=a(70143),C=a.n(b),P=a(37449),D=a.n(P),O=a(67085),L=a.n(O),k=a(21839),H=a.n(k),U=Object.defineProperty,w=Object.defineProperties,f=Object.getOwnPropertyDescriptors,e=Object.getOwnPropertySymbols,s=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,r=Reflect.get,o=(p,h,A)=>h in p?U(p,h,{enumerable:!0,configurable:!0,writable:!0,value:A}):p[h]=A,t=(p,h)=>{for(var A in h||(h={}))i.call(h,A)&&o(p,A,h[A]);if(e)for(var A of e(h))u.call(h,A)&&o(p,A,h[A]);return p},n=(p,h)=>w(p,f(h)),c=(p,h,A)=>(o(p,typeof h!="symbol"?h+"":h,A),A),g=(p,h,A)=>r(s(p),A,h),E=(p,h,A)=>new Promise((T,J)=>{var z=Q=>{try{j(A.next(Q))}catch(q){J(q)}},Z=Q=>{try{j(A.throw(Q))}catch(q){J(q)}},j=Q=>Q.done?T(Q.value):Promise.resolve(Q.value).then(z,Z);j((A=A.apply(p,h)).next())});const y={paper:{height:"calc(100% - 64px)"},fullHeight:{height:"100%","& .MuiInputBase-root":{height:"100%"}},textTime:{display:"inline-block",width:85},textLevel:{display:"inline-block",width:40},"textLevel-ERROR":{color:"red"},"textLevel-WARN":{color:"orange"},textSource:{display:"inline-block",width:100,textAlign:"left"},text:{display:"inline-block"},textLine:{whiteSpace:"nowrap"}};class S extends P.ConfigGeneric{constructor(h){super(h),c(this,"onOutput",(A,T)=>{if(T&&T.val&&T.val!==this.lastExecutionLine){this.lastExecutionLine=T.val;const J=[...this.state.executionLog],z=(T.val||"").toString().replace(/\n$/,"").split(`
`),Z=S.getTime();if(z.forEach(j=>{j=j.trim();const Q=j.match(/^\[(\w+)] \[(\w+)] - (.*)/);Q?J.push({level:Q[1],source:Q[2],ts:Z,text:Q[3]}):J.push({text:j})}),this.textRef.current&&this.textRef.current.scrollTop+this.textRef.current.clientHeight>=this.textRef.current.scrollHeight&&setTimeout(()=>this.textRef.current.scrollTop=this.textRef.current.scrollHeight,100),this.setState({executionLog:J}),T.val.startsWith("[EXIT]")){this.setState({executing:!1});const j=T.val.match(/^\[EXIT] ([-\d]+)/);this.state.closeOnReady&&(!j||j[1]==="0")&&(this.closeTimeout=this.closeTimeout||setTimeout(()=>{this.closeTimeout=null,this.setState({executionDialog:!1})},1500))}}}),c(this,"onEnabled",(A,T)=>{A===`${this.props.adapterName}.${this.props.instance}.oneClick.${this.props.schema.backUpType}`&&!!(T!=null&&T.val)!==this.state.executing&&this.setState({executing:!!(T!=null&&T.val)})}),this.state=n(t({},this.state),{executing:!1,executionDialog:!1,executionLog:[],closeOnReady:!1}),this.lastExecutionLine="",this.textRef=l().createRef()}static getTime(){const h=new Date;return`${h.getHours().toString().padStart(2,"0")}:${h.getMinutes().toString().padStart(2,"0")}:${h.getSeconds().toString().padStart(2,"0")}.${h.getMilliseconds().toString().padStart(3,"0")}`}componentDidMount(){return E(this,null,function*(){g(S.prototype,this,"componentDidMount").call(this),yield this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.oneClick.${this.props.schema.backUpType}`,this.onEnabled),yield this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.output.line`,this.onOutput)})}componentWillUnmount(){super.componentWillUnmount(),this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.oneClick.${this.props.schema.backUpType}`,this.onEnabled),this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.output.line`,this.onOutput),this.closeTimeout&&clearTimeout(this.closeTimeout),this.closeTimeout=null}renderLine(h,A){return l().createElement("div",{key:A,className:this.props.classes.textLine},l().createElement("div",{className:this.props.classes.textTime},h.ts),l().createElement("div",{className:`${this.props.classes.textLevel} ${h.level&&this.props.classes[`textLevel-${h.level}`]||""}`},h.level),l().createElement("div",{className:this.props.classes.textSource},h.source),l().createElement("div",{className:this.props.classes.text},h.text))}renderExecutionDialog(){return this.state.executionDialog?l().createElement(O.Dialog,{open:!0,onClose:()=>this.setState({executionDialog:!1}),maxWidth:"lg",fullWidth:!0,classes:{paper:this.props.classes.paper}},l().createElement(O.DialogTitle,null,P.I18n.t("BackItUp execution:")),l().createElement(O.DialogContent,{style:{position:"relative"}},this.state.executing?l().createElement(O.LinearProgress,{style:{position:"absolute",top:0,left:24,width:"calc(100% - 64px)"}}):l().createElement("div",{style:{height:4,width:"calc(100% - 64px)"}}),l().createElement("div",{style:{height:"calc(100% - 16px - 4px)",width:"calc(100% - 16px)",fontSize:12,fontFamily:"monospace",marginTop:4,padding:8,border:"1px solid grey",borderRadius:5,overflow:"auto",backgroundColor:this.props.themeType==="dark"?"#111":"#EEE",boxSizing:"border-box"},ref:this.textRef},this.state.executionLog.map((h,A)=>this.renderLine(h,A)))),l().createElement(O.DialogActions,null,l().createElement(O.FormControlLabel,{control:l().createElement(O.Checkbox,{disabled:!this.state.executing,checked:this.state.closeOnReady,onChange:h=>this.setState({closeOnReady:h.target.checked})}),label:P.I18n.t("close on ready")}),l().createElement(O.Button,{variant:"contained",onClick:()=>this.setState({executionDialog:!1})},P.I18n.t("Close")))):null}renderItem(){return l().createElement(l().Fragment,null,l().createElement(O.Button,{disabled:!this.props.alive||this.state.executing,onClick:()=>this.setState({executionDialog:!0,executionLog:[{ts:S.getTime(),level:"INFO",text:"starting...",source:"gui"}],executing:!0},()=>E(this,null,function*(){this.lastExecutionLine="",yield this.props.socket.setState(`${this.props.adapterName}.${this.props.instance}.oneClick.${this.props.schema.backUpType}`,!0)})),className:this.props.className,color:this.props.color,variant:"contained",style:this.props.style,endIcon:l().createElement(k.CloudUpload,null)},this.props.schema.label?P.I18n.t(this.props.schema.label):P.I18n.t("backup now")),this.renderExecutionDialog())}}S.propTypes={socket:d().object.isRequired,themeType:d().string,style:d().object,schema:d().object,onError:d().func};const I=(0,b.withStyles)(y)(S)},85903:(Y,K,a)=>{a.d(K,{A:()=>U});var B=a(37449),l=a.n(B),W=a(21839),d=a.n(W),b=a(67085),C=a.n(b),P=a(28437),D=Object.defineProperty,O=(w,f,e)=>f in w?D(w,f,{enumerable:!0,configurable:!0,writable:!0,value:e}):w[f]=e,L=(w,f,e)=>(O(w,typeof f!="symbol"?f+"":f,e),e),k=(w,f,e)=>new Promise((s,i)=>{var u=t=>{try{o(e.next(t))}catch(n){i(n)}},r=t=>{try{o(e.throw(t))}catch(n){i(n)}},o=t=>t.done?s(t.value):Promise.resolve(t.value).then(u,r);o((e=e.apply(w,f)).next())});class H extends B.ConfigGeneric{constructor(f){super(f),L(this,"fetchConfig",(e,s)=>k(this,null,function*(){return e==="ccu"?yield this.fetchCcuConfig(s):e==="mySql"?yield this.fetchMySqlConfig(s):e==="sqlite"?yield this.fetchSqliteConfig(s):e==="pgSql"?yield this.fetchPgSqlConfig(s):e==="influxDB"?yield this.fetchInfluxDBConfig(s):e==="history"?yield this.fetchHistoryConfig(s):(this.showMessage(B.I18n.t("BackItUp Warning!"),B.I18n.t("Unknown config type %s",e)),{changed:!1,found:!1})})),L(this,"checkAdapterInstall",(e,s)=>k(this,null,function*(){const i=this.props.common.host,u=!1;let r=e;(e==="pgsql"||e==="mysql"||e==="sqlite")&&(r="sql");const o=["zigbee","esphome","zigbee2mqtt","node-red","yahka","jarvis","history"];if(!u){const t=Object.values(yield this.props.socket.getObjectViewCustom("system","instance",`system.adapter.${r}.`,`system.adapter.${r}.\u9999`));if(t!=null&&t.length){let n=!1;for(let c=0;c<t.length;c++)if(t[c].common.host===i||s){n=!0;break}!n&&o.includes(r)&&this.showMessage(B.I18n.t("BackItUp Warning!"),B.I18n.t('No "%s" Instance found on this host. Please check your system',r))}else o.includes(r)&&this.showMessage(B.I18n.t("BackItUp Warning!"),B.I18n.t('No "%s" Instance found. Please check your system',r))}})),L(this,"showMessage",(e,s,i)=>{this.setState({message:{title:e,text:s,level:i||"info"}})}),this.state.message=!1}isConfigFilled(f){return f==="ccu"?!!this.props.data.ccuHost&&!!this.props.data.ccuEnabled:f==="mySql"?!!this.props.data.mySqlUser&&!!this.props.data.mySqlEnabled:f==="sqlite"?!!this.props.data.sqlitePath&&!!this.props.data.sqliteEnabled:f==="pgSql"?!!this.props.data.pgSqlUser&&!!this.props.data.pgSqlEnabled:f==="influxDB"?!!this.props.data.influxDBName&&!!this.props.data.influxDBEnabled:f==="history"?!!this.props.data.historyPath&&!!this.props.data.historyEnabled:(this.showMessage(B.I18n.t("BackItUp Warning!"),B.I18n.t("Unknown config type %s",f)),!1)}fetchCcuConfig(f){return k(this,null,function*(){const e=Object.values(yield this.props.socket.getObjectViewCustom("system","instance","system.adapter.hm-rpc.","system.adapter.hm-rpc.\u9999"));let s=!1,i=!1;if(e&&e.length){for(let u=0;u<e.length;u++){const r=e[u].common,o=e[u].native;if(r.enabled&&o){(f.ccuHost!==o.homematicAddress||f.ccuUsehttps!==o.useHttps)&&(f.ccuHost=o.homematicAddress,f.ccuUsehttps=o.useHttps,i=!0),s=e[u]._id;break}}if(!s)for(let u=0;u<e.length;u++){const r=e[u].native;(r&&f.ccuHost!==r.homematicAddress||f.ccuUsehttps!==r.useHttps)&&(f.ccuHost=r.homematicAddress,f.ccuUsehttps=r.useHttps,i=!0),s=e[u]._id}}return{changed:i,found:s}})}fetchMySqlConfig(f,e){return k(this,null,function*(){const s=Object.values(yield this.props.socket.getObjectViewCustom("system","instance","system.adapter.sql.","system.adapter.sql.\u9999"));let i=!1,u=!1;if(s&&s.length){for(let r=0;r<s.length;r++){const o=s[r].common,t=s[r].native;if(o.enabled&&(t==null?void 0:t.dbtype)==="mysql"){const n=t.port==="0"?3306:t.port||3306;(e.mySqlUser!==t.user||e.mySqlPassword!==t.password||e.mySqlHost!==t.host||e.mySqlPort!==n||e.mySqlName!==t.dbname)&&(e.mySqlUser=t.user,e.mySqlPassword=t.password,e.mySqlHost=t.host,e.mySqlPort=n,e.mySqlName=t.dbname,u=!0),i=s[r]._id;break}}if(!i)for(let r=0;r<s.length;r++){const o=s[r].native;if((o==null?void 0:o.dbtype)==="mysql"){const t=o.port==="0"?3306:o.port||3306;(e.mySqlUser!==o.user||e.mySqlPassword!==o.password||e.mySqlHost!==o.host||e.mySqlPort!==t||e.mySqlName!==o.dbname)&&(e.mySqlUser=o.user,e.mySqlPassword=o.password,e.mySqlHost=o.host,e.mySqlPort=t,e.mySqlName=o.dbname,u=!0),i=s[r]._id;break}}}return{changed:u,found:i}})}fetchSqliteConfig(f,e){return k(this,null,function*(){const s=Object.values(yield this.props.socket.getObjectViewCustom("system","instance","system.adapter.sql.","system.adapter.sql.\u9999"));let i=!1,u=!1;if(s&&s.length){for(let r=0;r<s.length;r++){const o=s[r].common,t=s[r].native;if(o.enabled&&t&&t.dbtype==="sqlite"&&t.fileName){const c=t.fileName.split("/")>1?t.fileName:`/opt/iobroker/iobroker-data/sqlite/${t.fileName}`;e.sqlitePath!==c&&(e.sqlitePath=c,u=!0),i=s[r]._id;break}}if(!i)for(let r=0;r<s.length;r++){const o=s[r].native;if((o==null?void 0:o.dbtype)==="sqlite"&&o.fileName){const n=o.fileName.split("/")>1?o.fileName:`/opt/iobroker/iobroker-data/sqlite/${o.fileName}`;e.sqlitePath!==n&&(e.sqlitePath=n,u=!0),i=s[r]._id;break}}}return{changed:u,found:i}})}fetchPgSqlConfig(f,e){return k(this,null,function*(){const s=Object.values(yield this.props.socket.getObjectViewCustom("system","instance","system.adapter.sql.","system.adapter.sql.\u9999"));let i=!1,u=!1;if(s&&s.length){for(let r=0;r<s.length;r++){const o=s[r].common,t=s[r].native;if(o.enabled&&(t==null?void 0:t.dbtype)==="postgresql"){const n=t.port==="0"?5432:t.port||5432;(e.pgSqlUser!==t.user||e.pgSqlPassword!==t.password||e.pgSqlHost!==t.host||e.pgSqlPort!==n||e.pgSqlName!==t.dbname)&&(e.pgSqlUser=t.user,e.pgSqlPassword=t.password,e.pgSqlHost=t.host,e.pgSqlPort=n,e.pgSqlName=t.dbname,u=!0),i=s[r]._id;break}}if(!i)for(let r=0;r<s.length;r++){const o=s[r].native;if((o==null?void 0:o.dbtype)==="postgresql"){const t=o.port==="0"?5432:o.port||5432;(e.pgSqlUser!==o.user||e.pgSqlPassword!==o.password||e.pgSqlHost!==o.host||e.pgSqlPort!==t||e.pgSqlName!==o.dbname)&&(e.pgSqlUser=o.user,e.pgSqlPassword=o.password,e.pgSqlHost=o.host,e.pgSqlPort=t,e.pgSqlName=o.dbname,u=!0),i=s[r]._id;break}}}return{changed:u,found:i}})}fetchInfluxDBConfig(f,e){return k(this,null,function*(){const s=Object.values(yield this.props.socket.getObjectViewCustom("system","instance","system.adapter.influxdb.","system.adapter.influxdb.\u9999"));let i=!1,u=!1;if(s&&s.length){for(let r=0;r<s.length;r++){const o=s[r].common,t=s[r].native;if(o.enabled){(e.influxDBHost!==t.host||e.influxDBVersion!==t.dbversion||e.influxDBProtocol!==t.protocol||e.influxDBName!==t.dbname||t.dbversion==="2.x"&&e.influxDBPort!==t.port)&&(e.influxDBHost=t.host,e.influxDBVersion=t.dbversion,e.influxDBProtocol=t.protocol,e.influxDBName=t.dbname,t.port&&t.dbversion==="2.x"&&(e.influxDBPort=t.port)),i=s[r]._id;break}}if(!i&&s.length&&s[0].native){const r=s[0].native;(r&&e.influxDBHost!==r.host||e.influxDBVersion!==r.dbversion||e.influxDBProtocol!==r.protocol||e.influxDBName!==r.dbname||r.dbversion==="2.x"&&e.influxDBPort!==r.port)&&(e.influxDBHost=r.host,e.influxDBVersion=r.dbversion,e.influxDBProtocol=r.protocol,e.influxDBName=r.dbname,r.port&&r.dbversion==="2.x"&&(e.influxDBPort=r.port)),i=s[0]._id}}return{changed:u,found:i}})}fetchHistoryConfig(f,e){return k(this,null,function*(){const s=Object.values(yield this.props.socket.getObjectViewCustom("system","instance","system.adapter.history.","system.adapter.history.\u9999"));let i="",u=!1,r=!1;if(s&&s.length){for(let t=0;t<s.length;t++){const n=s[t].common,c=s[t].native;if(n.enabled&&c){const g=c.storeDir&&!c.storeDir.startsWith("/opt/iobroker/backups")?c.storeDir:"/opt/iobroker/iobroker-data/history";e.historyPath!==g&&(e.historyPath=g,r=!0),i=c.storeDir,u=s[t]._id;break}}if(!u&&s[0]){const t=s[0].native;if(t){const n=t.storeDir&&!t.storeDir.startsWith("/opt/iobroker/backups")?t.storeDir:"/opt/iobroker/iobroker-data/history";e.historyPath!==n&&(e.historyPath=n,r=!0),i=t.storeDir,u=s[0]._id}}}let o;return u&&(i?i!=null&&i.startsWith("/opt/iobroker/backups")&&(o=B.I18n.t(`The storage path of %s must not be identical to the path for backups.
The default path of the history adapter has been set.

Please change the path in the history adapter!`,u.substring(15))):o=B.I18n.t(`No storage path of %s is configured.
The default path of the history adapter has been set.`,u.substring(15))),{changed:r,found:u,message:o}})}renderMessage(){return this.state.message?P.createElement(B.Message,{title:this.state.message.title,text:this.state.message.text,icon:this.state.message.level==="info"?P.createElement(W.Info,null):this.state.message.level==="warning"?P.createElement(W.Warning,{style:{color:"orange"}}):this.state.message.level==="error"?P.createElement(b.Alert,{style:{color:"red"}}):null,onClose:()=>this.setState({message:!1})}):null}}const U=H},37451:(Y,K,a)=>{a.d(K,{A:()=>f});var B=a(95973),l=a.n(B),W=a(85903),d=Object.defineProperty,b=Object.getOwnPropertySymbols,C=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,O=Reflect.get,L=(e,s,i)=>s in e?d(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i,k=(e,s)=>{for(var i in s||(s={}))P.call(s,i)&&L(e,i,s[i]);if(b)for(var i of b(s))D.call(s,i)&&L(e,i,s[i]);return e},H=(e,s,i)=>O(C(e),i,s),U=(e,s,i)=>new Promise((u,r)=>{var o=c=>{try{n(i.next(c))}catch(g){r(g)}},t=c=>{try{n(i.throw(c))}catch(g){r(g)}},n=c=>c.done?u(c.value):Promise.resolve(c.value).then(o,t);n((i=i.apply(e,s)).next())});class w extends W.A{componentDidMount(){return U(this,null,function*(){if(H(w.prototype,this,"componentDidMount").call(this),!this.isConfigFilled(this.props.schema.adapter)){const s=k({},this.props.data);(yield this.fetchConfig(this.props.schema.adapter,s)).changed&&this.props.onChange(s)}})}renderItem(){return this.renderMessage()}}w.propTypes={socket:l().object.isRequired,themeType:l().string,themeName:l().string,style:l().object,className:l().string,data:l().object.isRequired,attr:l().string,schema:l().object,onError:l().func,onChange:l().func};const f=w},86207:(Y,K,a)=>{a.d(K,{A:()=>r});var B=a(28437),l=a.n(B),W=a(95973),d=a.n(W),b=a(67085),C=a.n(b),P=a(21839),D=a.n(P),O=a(37449),L=a.n(O),k=a(85903),H=Object.defineProperty,U=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,e=(o,t,n)=>t in o?H(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,s=(o,t)=>{for(var n in t||(t={}))w.call(t,n)&&e(o,n,t[n]);if(U)for(var n of U(t))f.call(t,n)&&e(o,n,t[n]);return o},i=(o,t,n)=>new Promise((c,g)=>{var E=I=>{try{S(n.next(I))}catch(p){g(p)}},y=I=>{try{S(n.throw(I))}catch(p){g(p)}},S=I=>I.done?c(I.value):Promise.resolve(I.value).then(E,y);S((n=n.apply(o,t)).next())});class u extends k.A{renderItem(){return l().createElement(l().Fragment,null,l().createElement(b.Button,{variant:"contained",endIcon:l().createElement(P.Search,null),onClick:()=>i(this,null,function*(){const t=s({},this.props.data),n=yield this.fetchConfig(this.props.schema.adapter,!1,t);n.found?n.changed?(this.showMessage(O.I18n.t("BackItUp Information!"),n.message||O.I18n.t("Config taken from %s",n.found.substring(15))),this.props.onChange(t)):this.showMessage(O.I18n.t("BackItUp Information!"),n.message||O.I18n.t("Config found in %s, but nothing changed",n.found.substring(15))):this.showMessage(O.I18n.t("BackItUp Warning!"),O.I18n.t("No config found"),"warning")})},O.I18n.t("Detect config")),this.renderMessage())}}u.propTypes={socket:d().object.isRequired,themeType:d().string,themeName:d().string,style:d().object,className:d().string,data:d().object.isRequired,attr:d().string,schema:d().object,onError:d().func,onChange:d().func};const r=u},35665:(Y,K,a)=>{a.d(K,{A:()=>t});var B=a(28437),l=a.n(B),W=a(95973),d=a.n(W),b=a(67085),C=a.n(b),P=a(21839),D=a.n(P),O=a(37449),L=a.n(O),k=Object.defineProperty,H=Object.defineProperties,U=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable,s=(n,c,g)=>c in n?k(n,c,{enumerable:!0,configurable:!0,writable:!0,value:g}):n[c]=g,i=(n,c)=>{for(var g in c||(c={}))f.call(c,g)&&s(n,g,c[g]);if(w)for(var g of w(c))e.call(c,g)&&s(n,g,c[g]);return n},u=(n,c)=>H(n,U(c)),r=(n,c,g)=>new Promise((E,y)=>{var S=h=>{try{p(g.next(h))}catch(A){y(A)}},I=h=>{try{p(g.throw(h))}catch(A){y(A)}},p=h=>h.done?E(h.value):Promise.resolve(h.value).then(S,I);p((g=g.apply(n,c)).next())});class o extends O.ConfigGeneric{renderItem(){return l().createElement("div",{style:{width:"100%"}},l().createElement(b.Button,{disabled:!this.props.alive||this.state.running,endIcon:l().createElement(P.CloudUpload,null),variant:"contained",onClick:()=>this.setState({running:!0},()=>r(this,null,function*(){const c=yield this.props.socket.sendTo(null,"authGoogleDrive");this.setState({googleDriveUrl:c.url,running:!1})}))},O.i18n.t(this.props.data.googledriveAccessTokens?"Renew google drive access":"Get google drive access")),this.state.googleDriveUrl?l().createElement(l().Fragment,null,l().createElement("div",{style:{width:"100%"}},`${O.i18n.t("Authorize this app by visiting this url")}: `,l().createElement("a",{target:"_blank",href:this.state.googleDriveUrl,rel:"noreferrer"},this.state.googleDriveUrl)),l().createElement(b.TextField,{label:O.i18n.t("Enter the code from that page here"),variant:"standard",value:this.props.data.googledriveAccessTokens||"",onChange:c=>this.props.onChange(u(i({},this.props.data),{googledriveAccessTokens:c.target.value})),fullWidth:!0})):null)}}o.propTypes={socket:d().object.isRequired,themeType:d().string,themeName:d().string,style:d().object,className:d().string,data:d().object.isRequired,attr:d().string,schema:d().object,onError:d().func,onChange:d().func};const t=o},32149:(Y,K,a)=>{a.d(K,{A:()=>c});var B=a(28437),l=a.n(B),W=a(95973),d=a.n(W),b=a(67085),C=a.n(b),P=a(37449),D=a.n(P),O=a(85903),L=Object.defineProperty,k=Object.defineProperties,H=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,w=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable,s=Reflect.get,i=(g,E,y)=>E in g?L(g,E,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[E]=y,u=(g,E)=>{for(var y in E||(E={}))f.call(E,y)&&i(g,y,E[y]);if(U)for(var y of U(E))e.call(E,y)&&i(g,y,E[y]);return g},r=(g,E)=>k(g,H(E)),o=(g,E,y)=>s(w(g),y,E),t=(g,E,y)=>new Promise((S,I)=>{var p=T=>{try{A(y.next(T))}catch(J){I(J)}},h=T=>{try{A(y.throw(T))}catch(J){I(J)}},A=T=>T.done?S(T.value):Promise.resolve(T.value).then(p,h);A((y=y.apply(g,E)).next())});class n extends O.A{componentDidMount(){return t(this,null,function*(){o(n.prototype,this,"componentDidMount").call(this);const E=P.ConfigGeneric.getValue(this.props.data,this.props.attr),y=P.ConfigGeneric.getValue(this.props.data,this.props.schema.adapter==="telegram"?"telegramUser":"discordTarget"),I=Object.values(yield this.props.socket.getObjectViewCustom("system","instance",`system.adapter.${this.props.schema.adapter}.`,`system.adapter.${this.props.schema.adapter}.\u9999`)).map(p=>({value:p._id.substring(15),label:p._id.substring(15)}));I.unshift({value:"_",label:"none"}),this.setState({instances:I,instance:E,target:y},()=>{this.readTargets()})})}fillTelegramUser(){return t(this,null,function*(){var E;if((E=this.state.instance)!=null&&E.startsWith("telegram.")){if(this.instanceRead!==this.state.instance){let y=!1;const S=yield this.props.socket.getObject(`system.adapter.${this.state.instance}`);S&&S.native&&(y=S.native.useUsername);const I=yield this.props.socket.getState(`${this.state.instance}.communicate.users`),p=I==null?void 0:I.val,h=[{value:"allTelegramUsers",label:"All Receiver"}];if(p){this.instanceRead=this.state.target;const A=JSON.parse(p);for(const T in A)y?h.push({value:A[T].userName,label:A[T].userName}):h.push({value:A[T].firstName,label:A[T].firstName})}this.setState({targets:h})}}else this.props.data.telegramUser!=="allTelegramUsers"&&setTimeout(()=>this.props.onChange(r(u({},this.props.data),{telegramUser:"allTelegramUsers"})),50)})}fillDiscordTarget(){return t(this,null,function*(){var E;if((E=this.state.instance)!=null&&E.startsWith("discord.")){if(this.instanceRead!==this.state.instance){const y=yield this.props.socket.getState(`system.adapter.${this.state.instance}.alive`);if(y!=null&&y.val){const S=yield this.props.socket.sendTo(this.state.instance,"getNotificationTargets",{});if(Array.isArray(S)){this.instanceRead=this.state.instance;const I=[{value:"_",label:"none"}];for(const p in S)I.push({value:S[p].value,label:S[p].label});this.setState({targets:I})}}}}else{const y=[{value:"_",label:"none"}];this.setState({targets:y}),this.props.data.discordTarget&&setTimeout(()=>this.props.onChange(r(u({},this.props.data),{discordTarget:""})),50)}})}readTargets(){return t(this,null,function*(){this.props.schema.adapter==="telegram"?yield this.fillTelegramUser():this.props.schema.adapter==="discord"&&(yield this.fillDiscordTarget())})}renderItem(){var E,y;const S=(E=this.state.instances)==null?void 0:E.find(p=>p.value===(this.state.instance||"")),I=(y=this.state.targets)==null?void 0:y.find(p=>p.value===(this.state.target||""));return l().createElement("div",{style:{width:"100%"}},this.state.instances?l().createElement(b.FormControl,{style:{width:"calc(50% - 5px)",marginRight:10},variant:"standard"},l().createElement(b.InputLabel,null,P.I18n.t(this.props.schema.label)),l().createElement(b.Select,{variant:"standard",value:this.state.instance||"_",renderValue:()=>this.getText(S==null?void 0:S.label,(S==null?void 0:S.label)!=="none"),onChange:p=>this.setState({instance:p.target.value==="_"?"":p.target.value},()=>{this.readTargets(),this.onChange(this.props.attr,this.state.value)})},this.state.instances.map((p,h)=>l().createElement(b.MenuItem,{key:h,value:p.value},this.getText(p.label,(p==null?void 0:p.label)!=="none")))),this.props.schema.help?l().createElement(b.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null):null,this.state.targets?l().createElement(b.FormControl,{style:{width:"calc(50% - 5px)"},variant:"standard"},l().createElement(b.InputLabel,null,P.I18n.t(this.props.schema.adapter==="telegram"?"Telegram Receiver":"Discord receiver")),l().createElement(b.Select,{disabled:!this.state.instance,variant:"standard",value:this.state.target||"_",renderValue:()=>this.getText(I==null?void 0:I.label,(I==null?void 0:I.label)!=="none"),onChange:p=>this.setState({target:p.target.value==="_"?"":p.target.value},()=>this.onChange(this.props.schema.adapter==="telegram"?"telegramUser":"discordTarget",this.state.target))},this.state.targets.map((p,h)=>l().createElement(b.MenuItem,{key:h,value:p.value},this.getText(p.label,(p==null?void 0:p.label)!=="none")))),this.props.schema.help?l().createElement(b.FormHelperText,null,this.renderHelp(this.props.schema.help,this.props.schema.helpLink,this.props.schema.noTranslation)):null):l().createElement(b.TextField,{style:{width:"calc(50% - 5px)"},variant:"standard",disabled:!this.state.instance,label:P.I18n.t(this.props.schema.adapter==="telegram"?"Telegram Receiver":"Discord receiver"),value:this.state.target,onChange:p=>this.setState({target:p.target.value},()=>this.onChange(this.props.schema.adapter==="telegram"?"telegramUser":"discordTarget",this.state.target))}))}}n.propTypes={socket:d().object.isRequired,themeType:d().string,themeName:d().string,style:d().object,className:d().string,data:d().object.isRequired,attr:d().string,schema:d().object,onError:d().func,onChange:d().func};const c=n},50652:(Y,K,a)=>{a.d(K,{A:()=>oe});var B=a(28437),l=a.n(B),W=a(95973),d=a.n(W),b=a(70143),C=a(67085),P=a(21839),D=a(37449),O=a(86215),L=a(73861),k=a(25644);const H="data:image/png;base64,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",U="data:image/png;base64,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",w=a.p+"static/media/history.d21dcfa508bd8a624c85.png",f="data:image/png;base64,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";var e=a(28437);function s(v){return v>1024*1024*512?`${Math.round(v/(1024*1024*1024)*10)/10}${D.I18n.t("GiB")}`:v>1024*1024?`${Math.round(v/(1024*1024)*10)/10}${D.I18n.t("MiB")}`:v>1024?`${Math.round(v/1024*10)/10}${D.I18n.t("KiB")}`:`${v} ${D.I18n.t("bytes")}`}function i(v){const m=v.split("_");return parseInt(m[0],10).toString()!==m[0]&&m.shift(),new Date(m[0],parseInt(m[1],10)-1,parseInt(m[2].split("-")[0],10),parseInt(m[2].split("-")[1],10),parseInt(m[3],10)).toLocaleString().replace(/:00$/,"")}const u={local:P.Save,cifs:O.KZi,dropbox:O.KZi,ftp:O.nVN,googledrive:O.N4S,onedrive:L.Gnc,webdav:O.nBS,iobroker:U,redis:L.NK8,history:w,ccu:H,javascript:f,nodered:k.kDX};function r(v){if(!u[v])return null;if(typeof u[v]=="object"){const m=u[v];return e.createElement(m,{style:{width:24,height:24,marginRight:8}})}return e.createElement("img",{src:u[v],style:{width:24,height:24,marginRight:8},alt:v})}function o(v,m){downloadPanel?$(".cloudRestore").show():$(".cloudRestore").hide(),$(".do-list").addClass("disabled"),$("#tab-restore").find(".do-restore").addClass("disabled").hide(),$("#tab-restore").find(".do-download").addClass("disabled").hide();var M=file.split("/").pop().split("_")[0];showDialog(M!==""?"restore":"",isStopped),showToast(null,_("Restore started"));let F;try{F=currentTheme()}catch(X){}sendTo(null,"restore",{type,fileName:file,currentTheme:F||"none",currentProtocol:location.protocol,stopIOB:isStopped},function(X){if(!X||X.error)showError("Error: "+JSON.stringify(X.error));else{if(console.log("Restore finish!"),isStopped){var ee=`${location.protocol}//${location.hostname}:8091/backitup-restore.html`;console.log("Restore Url: "+ee),setTimeout(()=>window.open(ee,"_self"),restoreIfWait)}downloadPanel&&($(".cloudRestore").hide(),downloadPanel=!1)}$(".do-list").removeClass("disabled"),$("#tab-restore").find(".do-restore").removeClass("disabled").show(),$("#tab-restore").find(".do-download").removeClass("disabled").show()})}const n=v=>{const[m,M]=(0,B.useState)(null),[F,X]=(0,B.useState)([]),[ee,re]=(0,B.useState)(null);(0,B.useEffect)(()=>{let x=window.localStorage.getItem("BackupExpanded");try{x=JSON.parse(x)}catch(R){x=[]}X(x||[]),M(null),v.socket.sendTo(`${v.adapterName}.${v.instance}`,"list",v.backupSource).then(R=>{Object.keys(R.data).forEach(N=>{Object.keys(R.data[N]).forEach(V=>{R.data[N][V].sort((G,te)=>G.name>te.name?-1:1)})}),M(R)})},[]);const le=ee?e.createElement(D.Confirm,{open:!0,title:D.I18n.t(),text:D.I18n.t(),ok:D.I18n.t("Restore"),onClose:x=>{x&&o(),re(null)}}):null;return e.createElement(C.Dialog,{open:!0,onClose:v.onClose,fullWidth:!0,maxWidth:"lg"},e.createElement(C.DialogTitle,null,D.I18n.t("Backup history")),e.createElement(C.DialogContent,null,m?Object.keys(m.data).map(x=>e.createElement(C.Accordion,{key:x,expanded:F.includes(x),onChange:()=>{const R=[...F],N=R.indexOf(x);N===-1?(R.push(x),R.sort()):R.splice(N,1),window.localStorage.setItem("BackupExpanded",JSON.stringify(R)),X(R)},style:{backgroundColor:v.themeType?"rgba(10, 10, 10, 0.05)":"rgba(250, 250, 250, 0.05)"}},e.createElement(C.AccordionSummary,{expandIcon:e.createElement(P.ExpandMore,null)},r(x),e.createElement("span",{style:{fontWeight:"bold",fontSize:16}},D.I18n.t(x))),e.createElement(C.AccordionDetails,null,Object.keys(m.data[x]).map(R=>e.createElement(C.Accordion,{key:R,expanded:F.includes(R),onChange:()=>{const N=[...F],V=N.indexOf(R);V===-1?(N.push(R),N.sort()):N.splice(V,1),window.localStorage.setItem("BackupExpanded",JSON.stringify(N)),X(N)}},e.createElement(C.AccordionSummary,{expandIcon:e.createElement(P.ExpandMore,null)},r(R),e.createElement("span",{style:{fontWeight:"bold",fontSize:14}},D.I18n.t(R))),e.createElement(C.AccordionDetails,null,e.createElement(C.Table,{size:"small"},m.data[x][R].map((N,V)=>e.createElement(C.TableRow,{key:V},e.createElement(C.TableCell,{style:{width:200,whiteSpace:"nowrap",paddingRight:0}},D.I18n.t("Backup time"),":",e.createElement("span",{style:{marginLeft:8}},i(N.name))),e.createElement(C.TableCell,{style:{width:"calc(100% - 320px)",whiteSpace:"nowrap",paddingleft:0}},e.createElement("span",{style:{marginRight:8}},"|"),D.I18n.t("filesize"),":",e.createElement("span",{style:{marginLeft:8}},s(N.size))),e.createElement(C.TableCell,{style:{width:88}},e.createElement("div",{style:{display:"flex",gap:8}},e.createElement(C.Tooltip,{title:D.I18n.t("Restore Backup File")},e.createElement(C.Fab,{size:"small",onClick:()=>{let G=D.I18n.t("ioBroker will be restarted during restore.");G+=`

`,G+=D.I18n.t('Confirm with "OK".');let te=!1;(x==="dropbox"||x==="onedrive"||x==="googledrive"||x==="ftp"||x==="webdav")&&(G=D.I18n.t(`1. Confirm with "OK" and the download begins. Please wait until the download is finished!

2. After the download ioBroker will be restarted during restore.`),te=!0);var ae=!1;["grafana","jarvis","javascripts","mysql","sqlite","influxDB","pgsql","zigbee","esphome","zigbee2mqtt","nodered","yahka","historyDB"].includes(R)?ae=!0:te?(G=D.I18n.t('1. Confirm with "OK" and the download begins. Please wait until the download is finished!'),G+=`

`,G+=D.I18n.t("2. After the download, the restore begins without restarting ioBroker.")):G=D.I18n.t(`ioBroker will not be restarted for this restore.

Confirm with "OK".`),ae&&(G+=D.I18n.t("After confirmation, a new tab opens with the Restore Log."),G+=`


`,G+=D.I18n.t("If the tab does not open, please deactivate your popup blocker.")),re({location:x,object:R,backup:N,message:G})}},e.createElement(P.History,null)))))))))))))):e.createElement(C.LinearProgress,null)),e.createElement(C.DialogActions,null,e.createElement(C.Button,{onClick:v.onClose,startIcon:e.createElement(P.Close,null),variant:"contained",color:"grey"},D.I18n.t("Close"))),le)};var c=Object.defineProperty,g=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,S=(v,m,M)=>m in v?c(v,m,{enumerable:!0,configurable:!0,writable:!0,value:M}):v[m]=M,I=(v,m)=>{for(var M in m||(m={}))E.call(m,M)&&S(v,M,m[M]);if(g)for(var M of g(m))y.call(m,M)&&S(v,M,m[M]);return v};class p extends B.Component{render(){var m;const M=[{label:"Local",value:"local"},{name:"cifsEnabled",label:`NAS${(m=this.props.data)!=null&&m.connectType?` (${this.props.data.connectType})`:""}`,value:"cifs"},{name:"ftpEnabled",label:"FTP",value:"ftp"},{name:"dropboxEnabled",label:"Dropbox",value:"dropbox"},{name:"onedriveEnabled",label:"OneDrive",value:"onedrive"},{name:"googledriveEnabled",label:"Google Drive",value:"googledrive"},{name:"webdavEnabled",label:"WebDAV",value:"webdav"}];return l().createElement(C.FormControl,{classes:this.props.className,fullWidth:!0,variant:"standard",style:I({height:32},this.props.style||{})},l().createElement(C.InputLabel,null,D.I18n.t("Backup source")),l().createElement(C.Select,{variant:"standard",value:this.props.value||"local",onChange:F=>this.props.onChange(F.target.value)},M.map(F=>!F.name||!this.props.data||this.props.data[F.name]?l().createElement(C.MenuItem,{key:F.value,value:F.value},D.I18n.t(F.label)):null)))}}var h=Object.defineProperty,A=Object.defineProperties,T=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,j=(v,m,M)=>m in v?h(v,m,{enumerable:!0,configurable:!0,writable:!0,value:M}):v[m]=M,Q=(v,m)=>{for(var M in m||(m={}))z.call(m,M)&&j(v,M,m[M]);if(J)for(var M of J(m))Z.call(m,M)&&j(v,M,m[M]);return v},q=(v,m)=>A(v,T(m));const ne={paper:{height:"calc(100% - 64px)"},fullHeight:{height:"100%","& .MuiInputBase-root":{height:"100%"}},textLevel:{display:"inline-block",width:40},"textLevel-ERROR":{color:"red"},"textLevel-WARN":{color:"orange"},textSource:{display:"inline-block",width:70,marginRight:8,textAlign:"right"},text:{display:"inline-block"}};class se extends D.ConfigGeneric{constructor(m){super(m),this.state=q(Q({},this.state),{backupSource:window.localStorage.getItem("BackItUp.backupSource")||"local",showGetBackups:!1})}renderItem(){return l().createElement("div",{style:{width:"100%",display:"flex"}},l().createElement(p,{value:this.state.backupSource,data:this.props.data,onChange:m=>{window.localStorage.setItem("BackItUp.backupSource",m),this.setState({backupSource:m})}}),l().createElement(C.Button,{style:{marginTop:16},onClick:()=>this.setState({showGetBackups:!0}),disabled:!this.props.alive,variant:"contained",color:"grey",endIcon:l().createElement(P.Search,null)},D.I18n.t("Get backups")),l().createElement(C.FormControlLabel,{control:l().createElement(C.Checkbox,{value:this.props.data.startAllRestore,onChange:m=>this.props.onChange(q(Q({},this.props.data),{startAllRestore:m.target.checked}))}),label:D.I18n.t("Start all adapter after restore")}),this.state.showGetBackups?l().createElement(n,{onClose:()=>this.setState({showGetBackups:!1}),socket:this.props.socket,themeType:this.props.themeType,adapterName:this.props.adapterName,instance:this.props.instance,backupSource:this.state.backupSource,allowDownload:this.props.schema.allowDownload}):null)}}se.propTypes={socket:d().object.isRequired,themeType:d().string,style:d().object,schema:d().object,onError:d().func};const oe=(0,b.withStyles)(ne)(se)}}]);

//# sourceMappingURL=src_AdapterExist_jsx-src_BackupNow_jsx-src_CheckConfigInvisible_jsx-src_DetectConfig_jsx-src_-dbf87e.ee006fc2.chunk.js.map