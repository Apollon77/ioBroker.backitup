{"version":3,"file":"static/js/src_Components_jsx.ef64ac6a.chunk.js","mappings":"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","sources":["CheckAllConfigInvisible.jsx","Table.jsx","Components.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\r\nimport { I18n } from '@iobroker/adapter-react-v5';\r\n\r\nimport BaseField from './BaseField';\r\n\r\nclass CheckAllConfigInvisible extends BaseField {\r\n    constructor(props) {\r\n        super(props);\r\n        this.storedAlive = this.props.alive;\r\n        this.storedChecked = false;\r\n    }\r\n\r\n    checkConfiguration() {\r\n        if (this.props.alive && !this.storedChecked) {\r\n            this.storedChecked = true;\r\n            this.props.socket.sendTo(null, 'getFileSystemInfo', null)\r\n                .then(result => {\r\n                    if (result?.diskState && result.storage && result.diskFree) {\r\n                        if (result.diskState === 'warn' && result.storage === 'local') {\r\n                            this.showMessage(I18n.t('On the host only %s MB free space is available! Please check your system!', result.diskFree), I18n.t('BackItUp Information!'));\r\n                        } else if (result.diskState === 'error' && result.storage === 'local') {\r\n                            this.showMessage(I18n.t('On the host only %s MB free space is available! Local backups are currently not possible. \\n\\nPlease check your system!', result.diskFree), I18n.t('BackItUp Information!'), 'warning');\r\n                        }\r\n                    }\r\n                });\r\n            this.props.socket.sendTo(null, 'getSystemInfo', null)\r\n                .then(async result => {\r\n                    const data = { ...this.props.data };\r\n                    let changed = false;\r\n                    if (result?.systemOS === 'docker' && result.dockerDB === false) {\r\n                        if (data.redisType !== 'remote' && data.redisEnabled) {\r\n                            data.redisType = 'remote';\r\n                            changed = true;\r\n                        }\r\n                    }\r\n\r\n                    if (result?.systemOS === 'docker') {\r\n                        changed = true;\r\n                        data._restoreIfWait = 10000;\r\n                    } else if (result?.systemOS === 'win') {\r\n                        changed = true;\r\n                        data._restoreIfWait = 18000;\r\n                    }\r\n                    const CONFIGS = ['ccu', 'mySql', 'sqlite', 'pgSql', 'influxDB', 'history'];\r\n                    for (let c = 0; c < CONFIGS.length; c++) {\r\n                        if (!this.isConfigFilled(CONFIGS[c])) {\r\n                            const result = await this.fetchConfig(CONFIGS[c], data)\r\n                                .catch(e => this.showError(e));\r\n                            changed = changed || result.changed;\r\n                        }\r\n                    }\r\n\r\n                    changed && this.props.onChange(data);\r\n                });\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        super.componentDidMount();\r\n        this.checkDisk();\r\n    }\r\n\r\n    renderItem() {\r\n        if (this.storedAlive !== this.props.alive) {\r\n            this.storedAlive = this.props.alive;\r\n            if (this.storedAlive) {\r\n                this.checkConfiguration();\r\n            }\r\n        }\r\n\r\n        return this.renderMessage();\r\n    }\r\n}\r\n\r\nCheckAllConfigInvisible.propTypes = {\r\n    socket: PropTypes.object.isRequired,\r\n    themeType: PropTypes.string,\r\n    themeName: PropTypes.string,\r\n    style: PropTypes.object,\r\n    className: PropTypes.string,\r\n    data: PropTypes.object.isRequired,\r\n    attr: PropTypes.string,\r\n    schema: PropTypes.object,\r\n    onError: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n};\r\n\r\nexport default CheckAllConfigInvisible;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {\r\n    Button,\r\n    Table,\r\n    TableCell,\r\n    TableHead,\r\n    TableRow,\r\n} from '@mui/material';\r\n\r\nimport { Search, Add } from '@mui/icons-material';\r\n\r\nimport { I18n } from '@iobroker/adapter-react-v5';\r\n\r\nimport BaseField from './BaseField';\r\n\r\nclass CustomTable extends BaseField {\r\n    componentDidMount() {\r\n        super.componentDidMount();\r\n        // decode pass\r\n    }\r\n\r\n    renderItem() {\r\n        return <>\r\n            <Table size=\"dence\">\r\n                variant=\"contained\"\r\n                endIcon={<Search />}\r\n                onClick={async () => {\r\n                    const data = { ...this.props.data };\r\n                    const result = await this.fetchConfig(this.props.schema.adapter, false, data);\r\n                    if (result.found) {\r\n                        if (result.changed) {\r\n                            this.showMessage(I18n.t('BackItUp Information!'), result.message || I18n.t('Config taken from %s', result.found.substring('system.adapter.'.length)));\r\n                            this.props.onChange(data);\r\n                        } else {\r\n                            this.showMessage(I18n.t('BackItUp Information!'), result.message || I18n.t('Config found in %s, but nothing changed', result.found.substring('system.adapter.'.length)));\r\n                        }\r\n                    } else {\r\n                        this.showMessage(I18n.t('BackItUp Warning!'), I18n.t('No config found'), 'warning');\r\n                    }\r\n                }}\r\n            >\r\n                <TableHead>\r\n                    <TableRow>\r\n                        <TableCell>{I18n.t('Detect config')}</TableCell>\r\n                    </TableRow>\r\n                </TableHead>\r\n                {I18n.t('Detect config')}\r\n            </Table>\r\n            {this.renderMessage()}\r\n        </>;\r\n    }\r\n}\r\n\r\nCustomTable.propTypes = {\r\n    socket: PropTypes.object.isRequired,\r\n    themeType: PropTypes.string,\r\n    themeName: PropTypes.string,\r\n    style: PropTypes.object,\r\n    className: PropTypes.string,\r\n    data: PropTypes.object.isRequired,\r\n    attr: PropTypes.string,\r\n    schema: PropTypes.object,\r\n    onError: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n};\r\n\r\nexport default CustomTable;\r\n","import AdapterExist from './AdapterExist';\r\nimport BackupNow from './BackupNow';\r\nimport DetectConfig from './DetectConfig';\r\nimport CheckConfigInvisible from './CheckConfigInvisible';\r\nimport GoogleDrive from './GoogleDrive';\r\nimport Instance from './Instance';\r\nimport RestoreBackup from './RestoreBackup';\r\nimport CheckAllConfigInvisible from './CheckAllConfigInvisible';\r\nimport Table from './Table';\r\n\r\nexport default {\r\n    AdapterExist,\r\n    BackupNow,\r\n    DetectConfig,\r\n    GoogleDrive,\r\n    CheckConfigInvisible,\r\n    Instance,\r\n    RestoreBackup,\r\n    CheckAllConfigInvisible,\r\n    Table,\r\n};\r\n"],"names":["CheckAllConfigInvisible","BaseField","props","result","data","changed","CONFIGS","c","e","CustomTable"],"sourceRoot":""}